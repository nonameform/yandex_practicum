# Разработка решения для увеличения покупательской активности постоянных клиентов

## Описание задания и данных

По условиям поставленного задания, нам необходимо произвести маркировку уровня финансовой активности постоянных клиентов интернет-магазина «В один клик», собрать признаки клиентов в группы, создать модель, которая подскажет вероятность снижения покупательской активности клиента в следующие три месяца, выделить сегменты покупателей и разработать для них персонализированные предложения. Для анализа нам предоставлено четыре файла с данными.

В файле `market_file.csv` содержатся следующие данные: `id` — номер покупателя в БД, `Покупательская активность` — целевой признак, `Тип сервиса` — уровень сервиса, `Разрешить сообщать` — согласие на рассылку дополнительной информации, `Маркет_актив_6_мес` — количество маркетинговых коммуникаций за полгода, `Маркет_актив_тек_мес` — количество маркетинговых коммуникаций в текущем месяце, `Длительность` — количество дней с момента регистрации на сайте, `Акционные_покупки` — среднемесячная доля покупок по акции от общего числа покупок за полгода, `Популярная_категория` — самая популярная категория покупок за полгода, `Средний_просмотр_категорий_за_визит` — сколько категорий в среднем просмотрел покупатель за визит в течение месяца, `Неоплаченные_продукты_штук_квартал` — количество неоплаченных товаров в корзине за квартал, `Ошибка_сервиса` — количество сбоев, с которыми столкнулся покупатель во время посещения сайта и `Страниц_за_визит` — среднее количество просмотренных страниц за визит в течение квартала.

В файле `market_money.csv` содержатся следующие данные: `id` — номер покупателя в БД, `Период` — название периода, в который зафиксирована выручка, `Выручка` — сумма выручки за период.

В файле `market_time.csv` содержатся следующие данные: `id` — номер покупателя в БД, `Период` — название периода, в который зафиксировано время посещения сайта, `минут` — значение времени проведенного клиентом на сайте в минутах.

В файле `money.csv` содержатся следующие данные: `id` — номер покупателя в БД, `Прибыль` — среднемесячная прибыль магазина от покупателя за квартал.

В рамках проекта мы планируем произвести загрузку данных, произвести первичный анализ, предобработку и детальное рассмотрение каждого параметра имеющихся данных. Мы произведем устранение пропусков, если в этом есть необходимость, избавимся от дубликатов, приведем данные к соответствующим типам, удалим аномалии и выбросы или опишем их, произведем переименование столбцов и объединение таблиц `market_file.csv`, `market_money.csv` и `market_time.csv`, корреляционный анализ признаков.

Далее нами будет создан пайплайн для подбора лучшей модели. На основе результатов работы модели и данных из таблицы `money.csv` мы выполним сегментацию покупателей и предложим рекомендации для увеличения покупательской активности.

## Общий вывод

Мы произвели загрузку необходимых модулей и билиотек для работы, воспользовались собственной функцией для загрузки файлов с данными и произвели первичный (визуальный) анализ первых **20** строк в четырех таблицах. Нами были выявлены опечатки в некоторых столбцах. Исходя из количества записей в таблицах, мы предположили, что сервис предоставил информацию о **1 300** клиентах и их покупательской активности на сайте за три месяца. При этом в трех столбцах первой таблицы содержались данные за полгода, а во всех четырех таблицах столбец `id`, который позволил установить однозначное соотвествие между клиентом и информацией, собранной о нем в различных таблицах.
1. Мы произвели переименование столбцов в четырех датафреймах, сменили регистр в одном столбце датафрейма `df_mfile` и сменили тип данных в четырех столбцах двух датафреймов на булев. Мы выявили, что в данных не содержится полных дубликатов, что в каждом датафрейме есть данные ровно по **1 300** уникальным номерам покупателей в БД. Мы сделали допущение, что эти **1 300** номеров совпадают между датафреймами, поскольку данные в целом отличаются хорошим уровнем подготовки.
1. Мы рассмотрели данные во всех столбцах всех четырех датафреймов, произвели статистический анализ распределения данных, удалили **1** аномалию и **3** записи о клиентах, которые не совершали покупки на протяжении двух месяцев. Среднестатистический клиент интернет-магазина «В один клик» сохранил **прежний уровень покупательской активности**, **не имеет премиальной подписки** на сервис, **дал согласие** на получение дополнительной маркетинговой коммуникации по интересующим его товарам, приобрел товары в категории **«Товары для детей»**, **«Домашний текстиль»** или **«Косметика и аксессуары»**, в среднем имел **чуть более 4 коммуникаций** от маркетинговой службы интернет магазина (**4 коммуникации в текущем месяце**), зарегистрировался на сайте **около 600 дней назад**, **~ 24 % товаров** приобрел по акции, просматривал **3 категории за визит** на сайт в текущем месяце, имеет **~ 3 неоплаченных товара в корзине** за квартал, столкнулся с **~ 4 сбоями** во время визита сайта, просмотрел **~ 8 страниц товаров** за визит за квартал, принес магазину выручку **~ 4 тыс. руб.**, провел на сайте **~ 13 минут за визит**.
1. Путем манипуляций с данными мы объединили три исходных датафрейма в один.
1. Корреляционный анализ показал достаточно слабые связи между целевым признаком и предикторами.
1. По итогам работы пайплайна с данными с устраненным дисбалансом классов мы получили результат, что лучшую метрику $Accuracy$ на тренировочных (**0,88**) и тестовых (**0,84**) данных показала **модель kNN с высчитыванием манхэттенского расстояния для 7 соседей и стандартным масштабированием числовых признаков**.
1. По результатам анализа мы можем сделать вывод, что наиболее важным показателем, влияющим на покупательскую активность и которым может управлять интернет-магазин, является **объем маркетинговых коммуникаций за последние полгода**. Также немалое значение имеет **количество приообретенных клиентом товаров по акции**. Можно предположить, что **увеличение количества скидок** клиентам, что **положительно скажется на количестве приобретенных товаров**, **положительно скажется и на сохранении ими текущего уровня покупательской активности**.
1. По результатам рассмотрения сегмента покупателей пользователей, что совершают покупки в основном в разделе «Товары для детей», мы сделали вывод, что их **покупательская активность сильно связана с тем, как часто на сайте проводятся какие-либо акции (розыгрыши призов, распродажи)**. Для удержания этой аудитории мы предлагаем рассмотреть вариант **создания промежуточного уровня подписки между бесплатной и премиальной**, **введение программы лояльности для старых пользователей**, **дополнительные скидки**, приуроченные к датам, или скидки, связанные с приобретенеием определенного количества одного и того же товара.